<!-- templates/preview.html -->
{% extends 'base.html' %}
{% block title %}Aperçu du document - Mini-App HTML → PDF{% endblock %}
{% block content %}
<h2>Aperçu du document</h2>

<div class="card shadow mb-4">
  <div class="card-body">
    <h3 class="mb-2">{{ titre }}</h3>
    <p class="text-muted mb-1">Auteur : {{ nom }} &lt;{{ email }}&gt;</p>
    <hr>
    <div class="document-body">{{ corps|safe }}</div>
    <hr>
    <footer class="text-end text-muted small">Généré le {{ date }}</footer>
  </div>
</div>

<!-- Navigation simple -->
<form method="get" action="{{ url_for('main.form') }}" class="d-inline">
  <button type="submit" class="btn btn-secondary">Modifier</button>
</form>

<!-- Action sensible (POST) : CSRF -->
<form method="post" action="{{ url_for('main.generate_pdf') }}" class="d-inline">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <button type="submit" class="btn btn-primary">Générer le PDF</button>
</form>
{% endblock %}
