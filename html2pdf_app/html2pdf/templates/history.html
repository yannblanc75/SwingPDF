{% extends 'base.html' %}
{% block title %}Historique â€” Mini-App HTML â†’ PDF{% endblock %}
{% block content %}
<h2 class="page-title mb-4">Historique des documents gÃ©nÃ©rÃ©s</h2>

<div class="glass rounded-4 p-4">
  <div class="input-group input-group-lg mb-3">
    <span class="input-group-text">ðŸ”Ž</span>
    <input id="history-filter" type="text" class="form-control" placeholder="Rechercher un fichierâ€¦">
    <button class="btn btn-outline-secondary" type="button" id="clear-filter" aria-label="Effacer">âœ•</button>
  </div>

  {% if files %}
  <ul id="history-list" class="list-group list-group-flush">
    {% for f in files %}
      <li class="list-group-item d-flex align-items-center justify-content-between gap-3" data-filename="{{ f }}">
        <div class="text-truncate flex-grow-1">
          <span class="text-secondary me-2">â€¢</span>
          <span class="text-break">{{ f }}</span>
        </div>
        <div class="btn-group">
          <a class="btn btn-outline-light btn-sm" href="{{ url_for('main.download', filename=f) }}">TÃ©lÃ©charger</a>
          <button
            type="button"
            class="btn btn-primary btn-sm js-copy-link"
            data-bs-toggle="tooltip"
            data-bs-title="Copier le lien public"
            data-url="{{ url_for('main.download', filename=f, _external=True) }}">
            Copier le lien
          </button>
        </div>
      </li>
    {% endfor %}
  </ul>
  {% else %}
    <p class="m-0 text-secondary">Aucun PDF gÃ©nÃ©rÃ© pour lâ€™instant.</p>
  {% endif %}
</div>

<!-- liste brute (fallback debug) supprimÃ©e pour propretÃ© -->
{% endblock %}
