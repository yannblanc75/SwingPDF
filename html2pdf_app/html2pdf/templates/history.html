<!-- templates/history.html -->
{% extends 'base.html' %}
{% block title %}Historique des PDFs - Mini-App HTML → PDF{% endblock %}
{% block content %}
<h2>Historique des documents générés</h2>

<div class="input-group mb-3">
  <span class="input-group-text" aria-hidden="true">🔎</span>
  <input id="history-filter" type="text" class="form-control" placeholder="Rechercher un fichier…">
  <button id="history-clear" type="button" class="btn btn-outline-secondary" aria-label="Effacer">✕</button>
</div>

<ul id="history-list" class="list-group">
  {% for f in files %}
  <li class="list-group-item d-flex justify-content-between align-items-center" data-filename="{{ f }}">
    <span class="text-truncate">{{ f }}</span>
    <span class="btn-group">
      <a class="btn btn-sm btn-secondary" href="{{ url_for('main.download', filename=f) }}">Télécharger</a>
      <button type="button"
              class="btn btn-sm btn-primary js-copy-link"
              data-url="{{ url_for('main.download', filename=f, _external=True) }}">
        Copier le lien
      </button>
    </span>
  </li>
  {% else %}
  <li class="list-group-item text-muted">Aucun PDF généré pour l’instant.</li>
  {% endfor %}
</ul>
{% endblock %}
